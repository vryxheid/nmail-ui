<div class="inbox-table-container">
  <p-toolbar [style]="{ 'background-color': 'transparent', border: 'none' }">
    <ng-template #start>
      <p-checkbox
        [(ngModel)]="allSelected"
        [binary]="true"
        (onChange)="onSelectAllChanged($event)"
      ></p-checkbox>
    </ng-template>
  </p-toolbar>
  <p-table
    [value]="messages"
    [tableStyle]="{ 'min-width': '50rem' }"
    [scrollable]="true"
    scrollHeight="flex"
    id="inbox-table"
  >
    <ng-template #body let-message>
      <tr
        [class.unread]="!sentInbox && !message.data.read"
        [class.isSelected]="message.isSelected"
        (click)="onRowClick(message)"
      >
        <td>
          <p-checkbox
            [binary]="true"
            [(ngModel)]="message.isSelected"
            (onChange)="onCheckBoxClicked($event, message.data.id)"
          ></p-checkbox>
        </td>
        @if (!sentInbox) {
        <td>
          <i
            [class]="
              message.data.read
                ? 'fa-regular fa-envelope-open'
                : 'fa-regular fa-envelope'
            "
          ></i>
        </td>
        }
        <td>{{ message.data.subject }}</td>
        <td>from: {{ message.data.senderId }}</td>
        <td>{{ message.data.date | date : "dd MMM yyy, HH:mm" }}</td>
      </tr>
    </ng-template>
  </p-table>
</div>
